<ng-template #columnTemplate>
    <tr>
        <ng-container #rowColumns></ng-container>
    </tr>
</ng-template>
<table [ngClass]="datatableClass" style="width: 100%;">
    <thead>
        <tr *ngIf="groups!=null&&groups.length>0" class="header">
            <th *ngIf="haschildren&&collapseChildren!=null" [className]="gridClass.th" [ngStyle]="gridStyle.thGroup"></th>
            <ng-template ngFor let-colIndex="index" let-group [ngForOf]="groups">
                <th *ngIf="colIndex>0" [className]="gridClass.thSep" [ngStyle]="gridStyle.thSepGroup"></th>
                <th [className]="gridClass.th" [ngStyle]="group.colStyle" [attr.colspan]="group.colspan">
                    <ng-template ngFor let-line [ngForOf]="group.headers">
                        <div>{{line}}</div>
                    </ng-template>
                </th>
            </ng-template>
        </tr>
        <tr class="header" (mousemove)="allowResize?resizeColumn($event):null">
            <th *ngIf="haschildren&&collapseChildren!=null" [className]="gridClass.th" [ngStyle]="gridStyle.th"></th>
            <ng-template ngFor let-colIndex="index" let-col [ngForOf]="Columns">
                <th *ngIf="colIndex>0" [className]="gridClass.thSep" [ngStyle]="gridStyle.thSep" (mousedown)="(allowResize)?resizeColumnStart($event):null"
                    (mouseup)="(allowResize)?resizeColumnEnd($event):null"></th>
                <th [className]="gridClass.th" [ngStyle]="gridStyle.th">
                    <ng-template ngFor let-line [ngForOf]="col.header">
                        <div>{{line}}</div>
                    </ng-template>
                </th>
            </ng-template>
        </tr>
    </thead>
    <tbody>
        <ng-container #gridBody></ng-container>
        <ng-container *ngFor="let row of pagedata; let rowidx=index;">
            <tr class="data">
                <td *ngIf="haschildren&&collapseChildren!=null">
                    <a data-toggle="collapse" [href]="'#'+gridid+'_'+rowidx+'_inner'" [ngClass]="(collapseChildren=='true'||collapseChildren==true?' data-table-collapse':'')"
                        style="font-size: 10px;"></a>
                </td>
                <ng-template ngFor let-colIndex="index" let-col [ngForOf]="Columns">
                    <td *ngIf="colIndex>0" [className]="gridClass.tdSep" [ngStyle]="gridStyle.tdSep"></td>
                    <td [className]="gridClass.td" [ngStyle]="col.sgcStyle">
                        <data-table-cell [data]="row" [column]="col" [fadein]="fadein"></data-table-cell>
                    </td>
                </ng-template>
            </tr>
            <tr *ngIf="haschildren">
                <td *ngIf="collapseChildren!=null" style="border: 0px;padding:0px;"></td>
                <td [attr.colspan]="columnCount" style="border: 0px; padding: 0px;">
                    <div [id]="gridid+'_'+rowidx+'_inner'" [ngClass]="collapseChildren=='true'||collapseChildren==true?'data-table-collapse':''">
                        <div *ngFor="let child of Children">
                            <data-table-cell [data]="row" [child]="child"></data-table-cell>
                        </div>
                    </div>
                </td>
            </tr>
        </ng-container>
    </tbody>
</table>
<div *ngIf="totalpages!=null&&totalpages.length>0">
    <nav>
        <ul class="data-table-pages">
            <li [ngClass]="(pageno==0?'disabled':'')+' data-table-hand'"><a (click)="setFirstPage()">First</a></li>
            <li [ngClass]="(pageno==0?'disabled':'')+' data-table-hand'"><a (click)="setPrevPage()"><span aria-hidden="true">&laquo;</span> Previous</a></li>
            <li><a><input type="number" class="data-table-input-pageno" min="1" [max]="totalpages.length" [value]="pageno+1"
                (keyup.enter)="gotoPage(pagegoto.value)" #pagegoto> / {{totalpages.length}}</a></li>
            <li [ngClass]="(pageno < totalpages.length - 1?'':'disabled')+' data-table-hand'"><a (click)="setNextPage()">Next <span aria-hidden="true">&raquo;</span></a></li>
            <li [ngClass]="(pageno < totalpages.length - 1?'':'disabled')+' data-table-hand'"><a (click)="setLastPage()">Last</a></li>
        </ul>
    </nav>
</div>
